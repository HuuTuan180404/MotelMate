<div class="register-wrapper">
  <div class="background-overlay"></div>
  <form class="register-form" [formGroup]="form" (ngSubmit)="onSubmit()">
    <img src="/assets/images/logo.svg" alt="Logo" class="logo" />
    <h2 class="form-title">Register</h2>
    <p class="form-subtitle">Enter your information below to continue</p>
    <div class="form-container">
      <!-- Form Fields in 2 columns -->
      <div class="form-grid">
        <div class="form-column">
          <!-- Username -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Username</mat-label>
            <input matInput formControlName="username" placeholder="Enter your username" />
            <mat-error *ngIf="form.controls['username'].errors?.['required']">
              Username is required
            </mat-error>
          </mat-form-field>

          <!-- Password -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Password</mat-label>
            <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password"
              placeholder="Enter your password" />
            <button mat-icon-button matSuffix tabindex="-1" type="button" (click)="hidePassword = !hidePassword">
              <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
            </button>
            <mat-error *ngIf="form.controls['password'].errors?.['required']">
              Password is required
            </mat-error>
            <mat-error *ngIf="form.controls['password'].errors?.['minlength']">
              Min 6 characters
            </mat-error>
          </mat-form-field>

          <!-- CCCD -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>CCCD</mat-label>
            <input matInput formControlName="cccd" placeholder="Enter your CCCD number" />
            <mat-error *ngIf="form.controls['cccd'].errors?.['required']">
              CCCD is required
            </mat-error>
          </mat-form-field>

          <!-- Phone Number -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Phone Number</mat-label>
            <input matInput formControlName="phoneNumber" placeholder="Enter your phone number" />
            <mat-error *ngIf="form.controls['phoneNumber'].errors?.['required']">
              Phone number is required
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-column">
          <!-- Full Name -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Full Name</mat-label>
            <input matInput formControlName="fullName" placeholder="Enter your full name" />
            <mat-error *ngIf="form.controls['fullName'].errors?.['required']">
              Full name is required
            </mat-error>
          </mat-form-field>

          <!-- Confirm Password -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Confirm Password</mat-label>
            <input matInput [type]="hideConfirmPassword ? 'password' : 'text'" formControlName="confirmPassword"
              placeholder="Confirm your password" />
            <button mat-icon-button matSuffix tabindex="-1" type="button"
              (click)="hideConfirmPassword = !hideConfirmPassword">
              <mat-icon>{{ hideConfirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
            </button>
            <mat-error *ngIf="form.controls['confirmPassword'].errors?.['required']">
              Please confirm your password
            </mat-error>
            <mat-error
              *ngIf="form.controls['confirmPassword'].errors?.['passwordMismatch'] && !form.controls['confirmPassword'].errors?.['required']">
              Passwords do not match
            </mat-error>
          </mat-form-field>

          <!-- Birthday -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Birthday</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="birthday" placeholder="Select your birthday" />
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
            <mat-error *ngIf="form.controls['birthday'].errors?.['required']">
              Birthday is required
            </mat-error>
          </mat-form-field>

          <!-- Email -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Email</mat-label>
            <input matInput type="email" formControlName="email" placeholder="Enter your email" />
            <mat-error *ngIf="form.controls['email'].errors?.['required']">
              Email is required
            </mat-error>
            <mat-error *ngIf="form.controls['email'].errors?.['email']">
              Invalid email format
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <!-- Bank Info Row -->
      <div class="bank-info-row" style="display: flex; gap: 16px;">
        <mat-form-field appearance="outline" class="full-width" style="flex:1;">
          <mat-label>Bank Code</mat-label>
          <input matInput formControlName="bankCode" placeholder="Bank code" />
          <mat-error *ngIf="form.controls['bankCode'].errors?.['required']">
            Bank code is required
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline" class="full-width" style="flex:1;">
          <mat-label>Account Number</mat-label>
          <input matInput formControlName="accountNum" placeholder="Account number" />
          <mat-error *ngIf="form.controls['accountNum'].errors?.['required']">
            Account number is required
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline" class="full-width" style="flex:1;">
          <mat-label>Account Name</mat-label>
          <input matInput formControlName="accountName" placeholder="Account name" />
          <mat-error *ngIf="form.controls['accountName'].errors?.['required']">
            Account name is required
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <!-- Register button -->
    <button mat-raised-button color="primary" class="btn btn-primary" type="submit" [disabled]="form.invalid">
      Register
    </button>

    <!-- Back to Login -->
    <p class="login-link">
      Already have an account?
      <a routerLink="/login" class="back-link">Login</a>
    </p>
  </form>
</div>
