<div class="room-management">
  <header class="header">
    <div class="title">
      <h2>ROOM MANAGEMENT</h2>
    </div>

    <div class="right-section">
      <button
        mat-icon-button
        (click)="toggleFilter($event)"
        matTooltip="Filter"
        id="btn-open-filter-panel"
      >
        <span class="material-symbols-outlined"> filter_arrow_right </span>
      </button>
      <div class="search-box">
        <mat-form-field appearance="outline" class="search-field">
          <mat-label>Search</mat-label>
          <input
            matInput
            placeholder="Search..."
            [(ngModel)]="searchText"
            #input
          />
          <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>
      </div>

      <button
        mat-flat-button
        (click)="onClick_btnCreate()"
        class="button create-btn"
        matTooltip="Create room"
      >
        <mat-icon>add</mat-icon> <span>Create</span>
      </button>
    </div>
  </header>

  <!-- <app-room *ngFor="let room of _rooms" [room]="room"></app-room> -->
  <cdk-virtual-scroll-viewport itemSize="50%" class="room-list">
    <div class="rooms">
      <app-room *cdkVirtualFor="let room of _rooms" [room]="room"></app-room>
    </div>
  </cdk-virtual-scroll-viewport>

  <div class="filter-panel" [class.open]="isFilterPanelOpen" #filterPanel>
    <h3>Filter</h3>
    <br />
    <div class="btn-container">
      <button (click)="applyFilters()" style="background-color: #4caf50">
        <i class="fa-solid fa-filter"></i>
        Apply
      </button>
      <button (click)="clearFilters()" style="background-color: #f44336">
        <i class="fa-solid fa-filter-circle-xmark"></i>
        Clear
      </button>
      <button (click)="toggleFilter($event)">
        Close
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>

    <div class="filter-container">
      <!-- dropdown menu -->
      <div class="select-building">
        <mat-form-field>
          <mat-label>Building</mat-label>
          <mat-select [(value)]="buildingCode" canSelectNullableOptions>
            @for (option of options; track option) {
            <mat-option
              (click)="$event.stopPropagation()"
              [value]="option.code"
            >
              {{ option.name }}
            </mat-option>
            }
          </mat-select>
        </mat-form-field>
      </div>

      <!-- slider -->
      <div class="filter-price">
        <label>
          Price: {{minPrice| number:'1.0-0' }} - {{maxPrice| number:'1.0-0'}}
        </label>
        <mat-slider
          [min]="sliderMin"
          [max]="sliderMax"
          [step]="100000"
          [discrete]="true"
        >
          <input
            aria-label="from value"
            [(value)]="minPrice"
            matSliderStartThumb
          />
          <input aria-label="to value" [(value)]="maxPrice" matSliderEndThumb />
        </mat-slider>
      </div>
    </div>
  </div>
</div>
